<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-note/books/HTTPTheDefinitiveGuide" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.0"><title data-rh=true>《HTTP 权威指南》 | junjie‘s Home 🏠</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://Wangjunjie991116.github.io/img/docusaurus-social-card.jpg><meta data-rh=true name=twitter:image content=https://Wangjunjie991116.github.io/img/docusaurus-social-card.jpg><meta data-rh=true property=og:url content=https://Wangjunjie991116.github.io/docs/note/books/HTTPTheDefinitiveGuide><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="《HTTP 权威指南》 | junjie‘s Home 🏠"><meta data-rh=true name=description content="第一部分 HTTP：Web 的基础"><meta data-rh=true property=og:description content="第一部分 HTTP：Web 的基础"><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://Wangjunjie991116.github.io/docs/note/books/HTTPTheDefinitiveGuide><link data-rh=true rel=alternate href=https://Wangjunjie991116.github.io/docs/note/books/HTTPTheDefinitiveGuide hreflang=en><link data-rh=true rel=alternate href=https://Wangjunjie991116.github.io/docs/note/books/HTTPTheDefinitiveGuide hreflang=x-default><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="junjie‘s Home 🏠 RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="junjie‘s Home 🏠 Atom Feed"><meta name=referrer content=no-referrer><link rel=stylesheet href=/assets/css/styles.342c5b52.css><script src=/assets/js/runtime~main.a77802ea.js defer></script><script src=/assets/js/main.66540823.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_uGzV href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class=announcementBar_Wpow style=background-color:#fafbfc;color:#091E42 role=banner><div class=announcementBarPlaceholder_epdi></div><div class="content_D5Av announcementBarContent_tt4h">🎉 如果这个网站能帮助到你，欢迎给一个star支持作者  <a target=_blank rel="noopener noreferrer" href=https://github.com/Wangjunjie991116>GitHub</a> 🥳️</div><button type=button aria-label=Close class="clean-btn close closeButton_OrNp announcementBarClose_DPOx"><svg viewBox="0 0 15 15" width=14 height=14><g stroke=currentColor stroke-width=3.1><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"/></g></svg></button></div><nav aria-label=Main class="navbar navbar--fixed-top navbarHideable_UlQY"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt="My Site Logo" class="themedComponent_hmrS themedComponent--light_QUlI"><img src=/img/logo.svg alt="My Site Logo" class="themedComponent_hmrS themedComponent--dark_oBFb"></div><b class="navbar__title text--truncate">junjie‘s Home</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/docs/oss/jj-fast-utils> 🤝🏻 开源 </a><a class="navbar__item navbar__link" href=/docs/scheme/web-sessions-replay> 📚 方案 </a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/note/books/YouDonNotKnowJS> 📝 笔记 </a><a class="navbar__item navbar__link" href=/docs/article/intro> 📖 好文 </a><a class="navbar__item navbar__link" href=/docs/tool/intro> 🔧 工具 </a><a href=https://github.com/Wangjunjie991116 target=_blank rel="noopener noreferrer" class="navbar__item navbar__link"> GitHub <svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_dBRt><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_fdIv colorModeToggle_f41S"><button class="clean-btn toggleButton_GxKI toggleButtonDisabled_u9VJ" type=button disabled title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_psHh><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_xpX4><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_wVhJ></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_sLtI"><div class=docsWrapper_J6tn><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_gsKf" type=button></button><div class=docRoot_SzW9><aside class="theme-doc-sidebar-container docSidebarContainer_GQqX"><div class=sidebarViewport_th_F><div class="sidebar_Ucfe sidebarWithHideableNavbar_sMyY"><a tabindex=-1 class=sidebarLogo_hrcM href=/><img src=/img/logo.svg alt="My Site Logo" class="themedComponent_hmrS themedComponent--light_QUlI"><img src=/img/logo.svg alt="My Site Logo" class="themedComponent_hmrS themedComponent--dark_oBFb"><b>junjie‘s Home</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_PndI menuWithAnnouncementBar_bZJc"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--active">阅读 & 手账 👨‍💻</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/books/YouDonNotKnowJS>-《你不知道的JavaScrit》</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/note/books/HTTPTheDefinitiveGuide>-《HTTP权威指南》</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class=menu__link>实践 & 踩坑 🐾</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/practice/Taro>-Taro</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/practice/Net>-Net</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/practice/Mobile>-移动端开发（H5/小程序）</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/practice/Git>-Git</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/practice/React>-React</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/practice/HtmlCssJs>-HTML/CSS/JS</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class=menu__link>基础 & 原理 🤔</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/base/MiniApp>-小程序</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/base/Git>-Git</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/base/React>-React</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/note/base/HtmlCssJs>-HTML/CSS/JS</a></ul></ul></nav></div></div></aside><main class=docMainContainer_PbnN><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_CH6Z"><div class=docItemContainer_wjC9><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xiyl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_GqTu><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>阅读 & 手账 👨‍💻</span><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>-《HTTP权威指南》</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_YzpA theme-doc-toc-mobile tocMobile_VcQp"><button type=button class="clean-btn tocCollapsibleButton_mea1">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>《HTTP 权威指南》</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_Jjyt" id=第一部分-httpweb-的基础>第一部分 HTTP：Web 的基础<a href=#第一部��分-httpweb-的基础 class=hash-link aria-label="Direct link to 第一部分 HTTP：Web 的基础" title="Direct link to 第一部分 HTTP：Web 的基础">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_Jjyt" id=第-1-章-http-概述>第 1 章 HTTP 概述<a href=#第-1-章-http-概述 class=hash-link aria-label="Direct link to 第 1 章 HTTP 概述" title="Direct link to 第 1 章 HTTP 概述">​</a></h3>
<ol>
<li>HTTP 含义：超文本传输协议，是基于 TCP 的可靠数据传输协议。</li>
<li>服务器与资源关系：Web 服务器是 Web 资源的宿主。</li>
<li><code>MIME</code> 多媒体类型<!-- -->
<ol>
<li>含义：是一种文本标记，表示一种主要的对象类型和一个特定的子类型，中间由一条斜杠来分隔；</li>
<li>常见类型：<code>text/html</code>、<code>text/plain</code>、<code>image/jpeg</code> 等；</li>
<li>标识位置：<code>Content-Type</code>；</li>
<li>应用场景：HTTP 对每种要通过 Web 传输的对象都打上了 <code>MIME</code> 类型。</li>
</ol>
</li>
<li>URL：统一资源地址定位符。</li>
<li>请求方法<!-- -->
<ol>
<li>含义：通过不同的请求命令来告诉服务器所执行的行为；</li>
<li>常用方法：<code>GET</code>、<code>PUT</code>、<code>DELETE</code>、<code>POST</code>、<code>HEAD</code> 等。</li>
</ol>
</li>
<li>状态码<!-- -->
<ol>
<li>含义：响应状态码，告诉客户端应采取的行为。</li>
</ol>
</li>
<li>报文结构<!-- -->
<ol>
<li>组成：起始行、首部字段（首部以空行结束）、主体三部分；</li>
<li>类型：请求报文和响应报文；</li>
<li>请求报文：<!-- -->
<ol>
<li>组成：请求行（方法、目标、协议版本）、请求头（空行）、实体（给服务器的数据）。</li>
<li>结构：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703402855475-3768171d-7360-4dbe-8cb8-c628a8247efb.png alt="" class=img_v5A8></li>
</ol>
</li>
<li>响应报文：<!-- -->
<ol>
<li>组成：状态行（版本号、状态码、原因）、响应头（头部字段，如：<code>Date</code>、<code>Content-Type</code>、<code>Last-Modified</code>）、实体（返回客户端的数据）。</li>
<li>结构：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703402872553-d8d4bb45-7f31-481d-b896-28b181e2228d.png alt="" class=img_v5A8></li>
</ol>
</li>
<li>图示<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703407467999-5ebc5fc4-9efe-4353-8c04-de35d5653360.png alt="" class=img_v5A8></li>
</ol>
</li>
<li>TCP 优势<!-- -->
<ol>
<li>无差错的数据传输；</li>
<li>按序传输（数据总是会按照发送的顺序到达）；</li>
<li>未分段的数据流（可以在任意时刻以任意尺寸将数据发送出去）。</li>
</ol>
</li>
<li>基本的浏览器处理<!-- -->
<ol>
<li>DNS 解析：将域名地址解析成 IP 地址；</li>
<li>TCP 连接，即“三次握手”；</li>
<li>浏览器发送 HTTP 请求报文；</li>
<li>服务器处理请求，并响应 HTTP 响应报文；</li>
<li>浏览器解析渲染页面：<!-- -->
<ol>
<li>HTML → Dom Tree；</li>
<li>CSS → CSSOM Tree；</li>
<li>JavaScript 引擎解析 JavaScript 代码；</li>
<li>Dom Tree + CSSOM Tree = Render Tree；</li>
<li>Render。</li>
</ol>
</li>
<li>页面关闭，TCP 断开连接，即“四次挥手”。</li>
</ol>
</li>
<li>各版本特性<!-- -->
<ol>
<li>HTTP/0.9：只支持 <code>GET</code> 方法，不支持 <code>MIME</code>、各种 HTTP 首部、版本号，很快被取代；</li>
<li>HTTP/1.0：支持额外的方法，支持添加版本号、支持各种首部、以及对多媒体对象的处理，第一个广泛使用的版本；</li>
<li>HTTP/1.1：支持 <code>Keep-Alive</code> 连接、虚拟主机支持、代理连接支持，校正结构缺陷；</li>
<li>HTTP/2.0：关注性能优化。</li>
</ol>
</li>
<li>HTTP 各版本差异<!-- -->
<ol>
<li>HTTP/1.1 —— HTTP/1.0<!-- -->
<ol>
<li>长连接：HTTP/1.0 使用短连接（每进行一次 HTTP 操作，就建立一次连接，任务结束就中断连接），需要使用 <code>Keep-Alive</code> 参数来告知服务器端要建立一个长连接，而 HTTP/1.1 默认支持长连接。（HTTP 是基于 <code>TCP/IP</code> 协议的，创建一个 TCP 连接是需要经过三次握手的，有一定的开销，如果每次通讯都要重新建立连接的话，对性能有影响。因此最好能维持一个长连接，可以用一个长连接来发多个请求）</li>
<li>节约带宽：HTTP/1.1 支持只发送 <code>Header</code> 信息(不带任何 <code>Body</code> 信息)，如果服务器认为客户端有权限请求服务器，则返回 100，否则返回 401。客户端如果接收到 100，才开始把请求 <code>Body</code> 发送到服务器。这样当服务器返回 401 的时候，客户端就可以不用发送请求 <code>Body</code> 了，节约了带宽。</li>
<li>Host 域：HTTP/1.0 是没有 Host 域的，HTTP/1.1 才支持这个参数。（记录网站 IP 地址和域名映射关系的系统文件。作用：加快域名解析——跳过 DNS 域名解析步骤）</li>
<li>缓存：HTTP/1.1 支持 <code>Cache-Control</code> 机制。</li>
</ol>
</li>
<li>HTTP/2.0 —— HTTP/1.1<!-- -->
<ol>
<li>多路复用：HTTP/2.0 使用了多路复用（帧乱序，依照 <code>Stream</code> 流传，传后再做拼接）的技术，做到同一个连接并发处理多个请求，而且并发请求的数量比 HTTP/1.1 大了好几个数量级。</li>
<li>二进制分帧：在应用层（HTTP/2.0）和传输层（TCP/UDP）之间增加一个二进制分帧层。（将传输的消息分割成更小的消息和帧，并对其进行二进制编码，首部封装到 <code>Header</code> 帧，请求体封装到 <code>Data</code> 帧）</li>
<li>首部压缩：HTTP/1.1 不支持 <code>Header</code> 数据压缩，HTTP/2.0 对 <code>Header</code> 的数据进行压缩。</li>
<li>服务器推送：在 HTTP/2.0 中，服务器可以对客户端的一个请求发送多个响应。（可以额外的向客户端推送资源，客户端可以缓存这些资源，由不同页面共享——遵循同源策略）</li>
<li>安全：HTTP/2.0 是基于 HTTPS，天然具有安全性。</li>
</ol>
</li>
</ol>
</li>
<li>代理：位于客户端和服务器之间，接收所有客户端 HTTP 请求，并转发给服务器。</li>
<li>缓存<!-- -->
<ol>
<li>含义：特殊的 HTTP 代理服务器，将经过的文档内容进行复制保存；</li>
<li>作用：提高未来访问已缓存资源的效率。</li>
</ol>
</li>
<li>网关<!-- -->
<ol>
<li>含义：特殊服务器，作为其他服务器的中间实体使用；</li>
<li>作用：通常用于将 HTTP 流量转换成其他的协议。</li>
<li>图示：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403008588-49017808-6c7e-4161-8844-f5d649be57b6.png alt="" class=img_v5A8></li>
</ol>
</li>
<li>隧道<!-- -->
<ol>
<li>理解一：在两条连接之间对原始数据进行盲转发的 HTTP 应用程序。通常用来在一条或多条 HTTP 连接上转发非 HTTP 数据，转发时不会窥探数据；</li>
<li>理解二：是一种利用 HTTP 或 HTTPS 把多种网络协议封装起来进行通信的技术。理解成网络协议管道的包装器，将其他协议的请求掩盖成 HTTP 的请求。</li>
<li>图示：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403043123-1e8d9db2-981c-481b-8a1f-c7b188665003.png alt="" class=img_v5A8></li>
</ol>
</li>
</ol>
<h3 class="anchor anchorWithHideOnScrollNavbar_Jjyt" id=第-2-章-url-与资源>第 2 章 URL 与资源<a href=#第-2-章-url-与资源 class=hash-link aria-label="Direct link to 第 2 章 URL 与资源" title="Direct link to 第 2 章 URL 与资源">​</a></h3>
<ol>
<li>URI 统一资源地址标识符<!-- -->
<ol>
<li>组成<!-- -->
<ol>
<li>URL：统一资源地址定位符，描述资源的定位；</li>
<li>URN：统一资源名称，描述资源的名称，无法定位到具体位置。</li>
</ol>
</li>
</ol>
</li>
<li>通用 URL 组件<!-- -->
<ol>
<li>组成：方法、用户、密码、主机、端口、路径、参数、查询、片段。</li>
<li>图示：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703408157734-0be0f9f4-330c-4e72-9a87-a01b429e415a.png alt="" class=img_v5A8></li>
</ol>
</li>
<li>URL 分类：绝对 URL 和相对 URL。</li>
<li>URL 相对路径转绝对路径思路<!-- -->
<ol>
<li>寻找基础 URL<!-- -->
<ol>
<li>一些在资源中显式提供，如 <code>&lt;BASE></code> 标签包裹；</li>
<li>资源中未显式提供，却存在相对 URL，可将其所属资源的 URL 作为基础。</li>
</ol>
</li>
<li>解析相对引用：将相对 URL 和基础 URL 划分成组件段；</li>
<li>图示：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703407510861-aefb7d27-d8eb-4143-960e-cf8b54f92131.png alt="" class=img_v5A8></li>
</ol>
</li>
</ol>
<h3 class="anchor anchorWithHideOnScrollNavbar_Jjyt" id=第-3-章-http-报文>第 3 章 HTTP 报文<a href=#第-3-章-http-报文 class=hash-link aria-label="Direct link to 第 3 章 HTTP 报文" title="Direct link to 第 3 章 HTTP 报文">​</a></h3>
<ol>
<li><code>GET</code> 方法：请求获取资源。</li>
<li><code>HEAD</code> 方法<!-- -->
<ol>
<li>表现：响应只返回首部，不返回实体。</li>
<li>作用：<!-- -->
<ol>
<li>在不获取资源的情况下了解资源的情况（比如，判断其类型）；</li>
<li>通过查看响应中的状态码，看看某个对象是否存在；</li>
<li>通过查看首部，测试资源是否被修改了。</li>
</ol>
</li>
</ol>
</li>
<li><code>PUT</code> 方法：向服务器写入资源。</li>
<li><code>POST</code> 方法：向服务器推送数据（如表单数据提交）。</li>
<li><code>TRACE</code> 方法<!-- -->
<ol>
<li>表现：穿过防火墙、代理、网关等来请求服务器，并回显其收到的请求信息（每个中间节点都可能会修改原始的 HTTP 请求，通过响应形成“回环”检测，分析响应上原始报文是否被修改）；</li>
<li>作用：用于对 HTTP 请求的测试或诊断。</li>
<li>图示：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703407531965-ad3e5799-86e7-47a2-9468-cfd38a7df046.png alt="" class=img_v5A8></li>
</ol>
</li>
<li><code>OPTIONS</code> 方法<!-- -->
<ol>
<li>作用：请求服务器，响应服务器所支持的各种请求方法。</li>
<li>图示：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403288974-845f8e8e-22a2-43b0-b272-da22f5ea351b.png alt="" class=img_v5A8></li>
</ol>
</li>
<li><code>DELETE</code> 方法：请求服务器删除指定 URL 资源（服务器有权在不通知客户端情况下撤销请求）。</li>
<li>拓展方法：HTTP/1.1 中没有规范定义的方法<!-- -->
<ol>
<li><code>LOCK</code>：允许用户“锁定”资源——比如，可以在编辑某个资源的时候将其锁定，以防别人同时对其进行修改；</li>
<li><code>MKCOL</code>：允许用户创建资源；</li>
<li><code>COPY</code>：便于在服务器上复制资源；</li>
<li><code>MOVE</code>：在服务器上移动资源。</li>
</ol>
</li>
<li>安全方法：在服务器上不产生什么结果（<code>GET</code>、<code>HEAD</code>）。</li>
<li>常用 HTTP 方法中，只有 <code>POST</code> 和 <code>PUT</code> 包含主体。</li>
<li>首部分类<!-- -->
<ol>
<li>通用首部：<!-- -->
<ol>
<li>含义：既可以出现在请求报文中，也可以出现在响应报文中；</li>
<li>例子：<code>Date</code>、<code>Connection</code>、<code>Update</code>、<code>Cache-Control</code>、<code>Pragma</code> 等。</li>
</ol>
</li>
<li>请求首部：<!-- -->
<ol>
<li>含义：提供更多有关请求的信息；</li>
<li>例子：<code>Accept</code>、<code>Accept-Charset</code>、<code>Accept-Encoding</code>、<code>Accept-Language</code>、<code>Host</code>、<code>Referer</code>、<code>User-Agent</code>、<code>Expect</code>、<code>If-Match</code>、<code>If-Modified-Since</code>、<code>If-None-Match</code>、<code>If-Unmodified-Since</code>、<code>Authorization</code>、<code>Cookie</code> 等。</li>
</ol>
</li>
<li>响应首部：<!-- -->
<ol>
<li>含义：提供更多有关响应的信息；</li>
<li>例子：<code>Age</code>、<code>Server</code>、<code>Proxy-Authenticate</code>。</li>
</ol>
</li>
<li>实体首部：<!-- -->
<ol>
<li>含义：描述主体的长度和内容，或者资源自身；</li>
<li>例子：<code>Allow</code>、<code>Location</code>、<code>Content-Encoding</code>、<code>Content-Language</code>、<code>Content-Length</code>、<code>Content-Location</code>、<code>Content-Type</code>、<code>E-Tag</code>、<code>Expires</code>、<code>Last-Modified</code> 等。</li>
</ol>
</li>
<li>扩展首部：<!-- -->
<ol>
<li>含义：规范中没有定义的新首部。</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 class="anchor anchorWithHideOnScrollNavbar_Jjyt" id=第-4-章-连接管理>第 4 章 连接管理<a href=#第-4-章-连接管理 class=hash-link aria-label="Direct link to 第 4 章 连接管理" title="Direct link to 第 4 章 连接管理">​</a></h3>
<ol>
<li>HTTPS 区别于 HTTP：HTTPS 是在四层网络模型中 HTTP 层和 TCP 层中加了 SSL 或 TLS 密码加密层。<!-- -->
<ol>
<li>图示：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403334026-daaa829f-12e7-4bd4-87ff-6f5e5700192c.png alt="" class=img_v5A8></li>
</ol>
</li>
<li>报文传输方式：HTTP 报文以流 <code>Stream</code> 的形式进入 TCP 连接中，TCP 对数据切分成段封装在 IP 分组（ IP 数据报）中进行传输。</li>
<li>TCP 连接识别依据：源 IP 地址、源端口号、目的 IP 地址、目的端口号。<!-- -->
<ol>
<li>图示：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403351268-366ae08a-1fe7-402a-9755-32ec5a31dab5.png alt="" class=img_v5A8></li>
</ol>
</li>
<li>HTTP 时延造成原因<!-- -->
<ol>
<li>DNS 域名解析时延；</li>
<li>TCP 连接请求时延；</li>
<li>TCP 服务器回送响应时延；</li>
<li>数据传输时延；</li>
<li>服务器数据处理时延。</li>
</ol>
</li>
<li>握手导致的时延：通常 HTTP 事务都不会交换太多数据，此时，<code>SYN/SYN+ACK</code> 握手所产生的时延，对于一些小的 HTTP 事务来说，花在 TCP 建立上的时间占比可能达到 50%或者更多。</li>
<li>延迟确认：因特网无法保证可靠的分组传输，传输过程中会出现丢包情况，所以 TCP 实现了自己的确认机制。每个 TCP 段都有序列号和数据完整的校验和，接收方收到数据需要向发送方发送确认报文，确认报文很小，通常被捎带在朝相反方向输出的数据分组中。</li>
<li>“延迟确认”算法：在一个特定的窗口时间（通常是 100 ～ 200 毫秒）内，将输出确认存放在缓冲区中，寻找能够捎带它的输出数据分组。若时间段内没有输出数据分组，就将确认信息放在单独的分组中传送。</li>
<li>慢启动：传输初始限制传输速度，随着传输进行，逐步提高传输速度，用于防止因特网的突然过载和拥塞。</li>
<li>拥塞控制：控制发送分组数量，成功发送一个后，等待确认后则发送两个，逐步翻倍，以此类推。</li>
<li><code>Nagle</code> 算法<!-- -->
<ol>
<li>背景：TCP 有一个数据流接口，应用程序可以通过它将任意尺寸的数据放入 TCP 栈中——即使一次只放一个字节也可以。但是，每个 TCP 段中都至少装载了 40 个字节的标记和首部，所以如果 TCP 发送了大量包含少量数据的分组，网络的性能就会严重下降；</li>
<li>作用：<code>Nagle</code> 鼓励发送全尺寸（LAN 上最大尺寸的分组大约是 1500 字节，在因特网上是几百字节）的段，若还有其他分组仍然在传输，就会将数据暂时缓存，当缓存数据量达到全尺寸分组的数据时，才发送出去；</li>
<li>弊端：<code>Nagle</code> 算法会阻止数据的发送，直到有确认分组抵达，但确认分组自身会被延迟确认算法延迟 100 ～ 200 毫秒。</li>
</ol>
</li>
<li><code>Connection</code> 首部<!-- -->
<ol>
<li>场景：在客户端和源服务器之间会存在一些 HTTP 中间实体（高速缓存、代理），相邻两个实体会为共用的连接应用一组选项，<code>Connection</code> 携带连接标签列表，在源端服务器发出携带 <code>Connection</code> 的响应被经过的第一个中间实体解析以后会被移除，再将移除后的响应转发给下一实体。</li>
<li>作用：<!-- -->
<ol>
<li>控制不再转发给下一 HTTP 中间实体的首部字段；</li>
<li>管理持久连接。</li>
</ol>
</li>
<li>示意图：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403419648-99dd3259-bd5e-424e-8acc-878ea9932a4c.png alt="" class=img_v5A8></li>
<li>一些类似的也会被移除不能被代理转发的首部：<code>Prxoy-Authenticate</code>、<code>Proxy-Connection</code>、<code>Transfer-Encoding</code> 和 <code>Upgrade</code>。</li>
</ol>
</li>
<li>提高 HTTP 连接性能的处<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703408134947-4f5336d5-fb74-428f-82ea-9e59fffe1b2e.png alt="" class=img_v5A8>
<ol>
<li>并行连接<!-- -->
<ol>
<li>方式：通过多条 TCP 连接发起并发的 HTTP 请求；</li>
<li>优化原理：请求并行，时延重叠。</li>
</ol>
</li>
<li>持久连接<!-- -->
<ol>
<li>含义：事务处理结束之后仍然保持在打开状态的 TCP 连接；</li>
<li>方式：开启 <code>Keep-Alive</code> 首部，保持 TCP 连接，持续发起 HTTP 请求；</li>
<li>优化原理：消除 TCP 连接及关闭时延，避开慢启动的拥塞适应阶段；</li>
<li>规则/限制：<!-- -->
<ol>
<li>HTTP/1.1 的代理需具备分别管理客户端和服务器的持久连接；</li>
<li>HTTP/1.1 设备可以在任意时刻关闭连接；</li>
<li>除非重复发起请求会有副作用，否则若在客户端收到整条响应之前关闭连接，客户端必须重新发起请求；</li>
<li>一个客户端对任意服务器/代理最多为 <code>2</code> 条持久连接，防止服务器过载。代理需面对 <code>N</code> 个客户端，所以最多需要维护 <code>2N</code> 到父代理或服务器的持久连接。</li>
</ol>
</li>
<li><code>Keep-Alive</code> 首部：<!-- -->
<ol>
<li>含义：长链接的标识；</li>
<li>版本差异：HTTP/1.0 需要手动在请求头中加入 <code>Connection：Keep-Alive</code>，HTTP/1.1 默认支持。</li>
<li>参数<!-- -->
<ol>
<li><code>timeout</code>
<ol>
<li>发送方：响应首部；</li>
<li>作用：服务器希望此连接保持活跃状态的时间，非承诺值。</li>
</ol>
</li>
<li><code>max</code>
<ol>
<li>发送方：响应首部；</li>
<li>作用：服务器希望再为多少个事务保持此连接的活跃状态，非承诺值。</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>管道化连接<!-- -->
<ol>
<li>方式：在持久连接基础上，共享 TCP 连接，维护请求队列形成管道，发起并发的 HTTP 请求；</li>
<li>优化原理：保持连接，交替传送请求/响应报文，降低网络回环时间；</li>
<li>规则/限制：<!-- -->
<ol>
<li>客户端无法确认连接是持久的，则不使用管道；</li>
<li>请求和响应需顺序一致，否则无法匹配；</li>
<li>客户端做好连接随时被关闭的准备，准备好重发未完成的管道请求；</li>
<li>客户端不应该使用管道化方式发送会产生副作用的请求（如 POST 出错，无法安全重试此类非幂等请求）。</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>逐跳首部<!-- -->
<ol>
<li>含义：只适用于单条传输链路，不沿着传输链路向下传输的首部；</li>
<li>理解：只对单次转发有效，会因为通过代理或缓存而不再进行转发；</li>
<li>范围：<code>Connection</code> 及其值、<code>Prxoy-Authenticate</code>、<code>Proxy-Connection</code>、<code>Transfer-Encoding</code> 和 <code>Upgrade</code>。</li>
</ol>
</li>
<li>客户端连接关闭预防：连接随时有可能被关闭，需检测数据长度是否能和 <code>Content-Length</code> 匹配上，如缓存代理检测到其不匹配，则不应该缓存该信息，防止未来出现缓存内容和新内容拼接不正确的问题，同时，将该信息原封不动传输给客户端。</li>
<li>连接关闭的不同情况<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403517065-34fcb536-39f8-4214-89e0-73ae58d96962.png alt="" class=img_v5A8>
<ol>
<li>完全关闭：输入输出信道均关闭，安全。</li>
<li>半关闭：<!-- -->
<ol>
<li>输出信道关闭：安全。对端会在缓存区收到通知，知道流结束，即知对向连接关闭。</li>
<li>输入信道关闭：危险。对端不知道你不再接收数据，而发送过来请求，你会自动回送一条 TCP “连接被对端重置”的报文，这会导致操作系统清空当前缓存区数据，当最终要去读取关闭信道之前已缓存的数据时，得不到数据，且收到连接被对端重置的错误。</li>
</ol>
</li>
</ol>
</li>
<li>幂等性<!-- -->
<ol>
<li>计算机学：事务无论多次操作或一次操作，返回结果相同；</li>
<li>特指前端：Web 中发起多次 HTTP 请求返回值不变<!-- -->
<ol>
<li>幂等：<code>GET</code>、<code>PUT</code>、<code>HEAD</code>、<code>DELETE</code>、<code>TRACE</code>、<code>OPTIONS</code> 或数据库操作 <code>SELETE</code> 等；</li>
<li>非幂等：<code>POST</code>、<code>UPDATE</code> 等（非幂等方法不可随意重试，容易造成数据出错）。</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 class="anchor anchorWithHideOnScrollNavbar_Jjyt" id=第二部分-http-结构>第二部分 HTTP 结构<a href=#第二部分-http-结构 class=hash-link aria-label="Direct link to 第二部分 HTTP 结构" title="Direct link to 第二部分 HTTP 结构">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_Jjyt" id=第-5-章-web-服务器>第 5 章 Web 服务器<a href=#第-5-章-web-服务器 class=hash-link aria-label="Direct link to 第 5 章 Web 服务器" title="Direct link to 第 5 章 Web 服务器">​</a></h3>
<ol>
<li>Web 服务器基本任务<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403805175-ea207985-1714-44fa-b57d-2a2fbae4bff1.png alt="" class=img_v5A8>
<ol>
<li>建立连接——接收客户端连接；</li>
<li>接收请求——读取 HTTP 请求报文；</li>
<li>处理请求——解释请求报文，并操作；</li>
<li>访问资源——访问报文指定资源；</li>
<li>构建响应——创建 HTTP 响应报文；</li>
<li>发送响应——将响应回送给客户端；</li>
<li>记录日志——事务有关内容记录日志文件。</li>
</ol>
</li>
<li>建立连接<!-- -->
<ol>
<li>从 TCP 中解析 IP 地址；</li>
<li>反向 DNS 识别：<!-- -->
<ol>
<li>DNS ：是域名解析为 IP 地址；</li>
<li>反向 DNS（或 rDNS）：是将 IP 地址解析为域名，主要用于访问控制和日志记录；</li>
<li>（拓展：“双向 DNS ”，是与目标 IP 处于同一个网段时，显示内网 IP，与目标 IP 不处于同一个网段时，显示外网 IP 。实现内网主机和外网主机访问同一网站域名，定义到不同服务器。）</li>
</ol>
</li>
<li>服务器通过 <code>ident</code> 协议确定客户端用户。</li>
</ol>
</li>
<li>接收请求<!-- -->
<ol>
<li>报文内部表示法：Web 服务器生成便于操作请求报文的内部数据结构来存储请求报文（如数据结构中含指针、长度等，来快速指向特定首部）。</li>
<li>输入/输出处理结构：<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403837655-55ff4979-a49b-481a-8ce0-8b9b65e42962.png alt="" class=img_v5A8>
<ol>
<li>单线程 Web 服务器<!-- -->
<ol>
<li>特点：一次处理一请求；</li>
<li>优势：易于实现；</li>
<li>弊端：串行，性能差。</li>
</ol>
</li>
<li>多进程及多线程 Web 服务器<!-- -->
<ol>
<li>特点：多进程或多线程并行处理；</li>
<li>优势：高效；</li>
<li>弊端：连接条数数量级高时，耗资源；</li>
</ol>
</li>
<li>复用 I/O 服务器<!-- -->
<ol>
<li>特点：监视所有连接，只处理有状态变化的连接；</li>
<li>优势：相对高效；</li>
<li>弊端：若单线程压力大。</li>
</ol>
</li>
<li>复用多线程 Web 服务器<!-- -->
<ol>
<li>特点：结合多线程和复用，利用多 CPU 上每个 CPU 而带来的多线程；</li>
<li>优点：<code>N \* M</code> 结构，能处理的请求更多，每个 M 所有处理的请求数量减少，效率最高。</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>Web 服务器确定响应主体拓展名的确认方式<!-- -->
<ol>
<li><code>MIME</code> 方式：服务器直接根据资源后缀在包含所有拓展名的 <code>MIME</code> 类型的文件进行扫描匹配，来确定 <code>MIME</code> 类型；</li>
<li>魔法分类：服务器扫描资源内容，来与一个已知模式表进行匹配，从而决定 <code>MIME</code> 类型；<!-- -->
<ol>
<li>优点：文件没有标准扩展名也能确定 <code>MIME</code> 类型；</li>
<li>缺点：扫描速度慢；</li>
</ol>
</li>
<li>显式分类：对服务器进行配置，强制特定文件或目录为某个 <code>MIME</code> 类型；</li>
<li>类型协商：一些服务器可以使用多种格式存储资源，这种情况下，可通过与用户协商方式来决定选择哪种格式。</li>
</ol>
</li>
<li>重定向应用场景<!-- -->
<ol>
<li>永久搬离的资源；</li>
<li>临时搬离的资源；</li>
<li>URL 增强：常用于嵌入上下文，请求到达时生成新的 URL，该 URL 包含嵌入式状态的信息，最后将用户重定向到新的 URL 上并再次重新发起请求；</li>
<li>负载均衡：某台服务器超载，将客户端重定向到另一台负载不太重的服务器上；</li>
<li>服务器关联：服务器可能会存储某些用户的本地信息，服务器可以将客户端重定向到存储对应用户信息的服务器上；</li>
<li>规范目录名称：当请求 URI 是不带尾部斜线的目录名时，多数服务器会将客户端重定向到一个加了斜线的 URI 上，以保证相对链接正常工作。</li>
</ol>
</li>
<li>常见 Web 服务器软件<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403879833-823f7fb0-abfd-4ce7-b5ba-05f0b540d7d3.png alt="" class=img_v5A8></li>
</ol>
<h3 class="anchor anchorWithHideOnScrollNavbar_Jjyt" id=第-6-章-代理>第 6 章 代理<a href=#第-6-章-代理 class=hash-link aria-label="Direct link to 第 6 章 代理" title="Direct link to 第 6 章 代理">​</a></h3>
<ol>
<li>代理服务器<!-- -->
<ol>
<li>定义：是客户端和服务器的中间媒介，既支持服务器的响应功能，也具备客户端发起请求的功能，提供诸如缓存等优化服务；</li>
<li>优势：改善安全性，提高性能，流量监控；</li>
<li>应用场景<!-- -->
<ol>
<li>儿童过滤器<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403902828-4b8b666f-bf3f-46c7-b497-e4479de266ca.png alt="" class=img_v5A8></li>
<li>访问权限控制<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403934497-abeaa8fe-7e58-4e72-afbe-8adeb44ff531.png alt="" class=img_v5A8></li>
<li>安全防火墙<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403948378-12ed4f2d-4ece-4652-91c9-ec45b46f52c5.png alt="" class=img_v5A8></li>
<li>Web 缓存<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403969020-8eb6d7af-ad5b-4da5-8d52-2f4082ec4af8.png alt="" class=img_v5A8></li>
<li>反向代理<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703403983614-56d9f6c2-7afe-40af-9c8c-f1ee378c7d2a.png alt="" class=img_v5A8></li>
<li>内容路由器：如提供付费高速等<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703404002901-1e7c0474-bd0f-4311-87c0-801c068f9c9f.png alt="" class=img_v5A8></li>
<li>转码器：数据格式转换，如 Gif → Jpeg 等<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703404018625-cf563f52-3aff-4023-a627-aecfd505acf7.png alt="" class=img_v5A8></li>
<li>匿名者：主动删除 HTTP 上的身份特性提高私密性，如 <code>Referer</code>、<code>Cookie</code>、IP 地址等<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703404034764-4582122d-302e-4ef9-91c7-da125a0499b4.png alt="" class=img_v5A8></li>
</ol>
</li>
</ol>
</li>
<li>私有/公共代理：区别在于是否为某一客户端专享。大多数为公有共享代理。</li>
<li>代理和网关区别：代理连接相同协议的应用程序；网关连接不同协议，起到协议转换的作用。（现代代理面对不同的 HTTP 协议版本，通常也具备协议转换的能力，以便支持 SSL、FTP 访问等）<img decoding=async loading=lazy src=https://cdn.nlark.com/yuque/0/2023/png/25855170/1703404060633-021e13e8-398f-4d03-abc8-30b781e1b7ad.png alt="" class=img_v5A8></li>
<li>代理层次结构：越靠近客户端为子，越靠近服务器为父。<!-- -->
<ol>
<li>静态：按照固定路线走代理；</li>
<li>动态：根据不同情况将请求报文转发给不固定的代理（如付费用户，走 CDN 代理等）；<!-- -->
<ol>
<li>动态选择父代理场景：负载均衡、地理位置附近的路由、协议/类型路由（特定 URI 需要通过特定类型父代理转发请求，进行特殊协议处理）、基于订购的路由（付费用户 URI 转发到大型缓存或压缩引擎上）。</li>
</ol>
</li>
</ol>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/3-note/books/HTTP权威指南.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_wqPB aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_IM1G"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/note/books/YouDonNotKnowJS><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>-《你不知道的JavaScrit》</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/note/practice/Taro><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>-Taro</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_xS8M thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#第一部分-httpweb-的基础 class="table-of-contents__link toc-highlight">第一部分 HTTP：Web 的基础</a><ul><li><a href=#第-1-章-http-概述 class="table-of-contents__link toc-highlight">第 1 章 HTTP 概述</a><li><a href=#第-2-章-url-与资源 class="table-of-contents__link toc-highlight">第 2 章 URL 与资源</a><li><a href=#第-3-章-http-报文 class="table-of-contents__link toc-highlight">第 3 章 HTTP 报文</a><li><a href=#第-4-章-连接管理 class="table-of-contents__link toc-highlight">第 4 章 连接管理</a></ul><li><a href=#第二部分-http-结构 class="table-of-contents__link toc-highlight">第二部分 HTTP 结构</a><ul><li><a href=#第-5-章-web-服务器 class="table-of-contents__link toc-highlight">第 5 章 Web 服务器</a><li><a href=#第-6-章-代理 class="table-of-contents__link toc-highlight">第 6 章 代理</a></ul></ul></div></div></div></div></main></div></div></div></div>